webpackJsonp([1],{129:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(7),r=l(n),s=a(8),o=l(s),u=a(9),c=l(u),i=a(11),d=l(i),f=a(10),m=l(f),p=a(1),h=l(p),E=a(20),v=l(E),g=a(230),N=l(g),_=a(229),y=l(_);a(299);var w=function(e){function t(e){(0,o.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.selectRatingsClassify=function(e){a.setState({showRatingsType:e})},a.toggleContent=function(){a.setState({showAllRatingsText:!a.state.showAllRatingsText})},a.showRatingsCount=function(e){var t=a.props.ratings;return e===a.ALL?t.length:t.filter(function(t){return t.rateType===e}).length},a.state={showRatingsType:-1,showAllRatingsText:!0},a.ALL=-1,a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classify,l=t.ratings,n=t.type,r=this.state,s=r.showRatingsType,o=r.showAllRatingsText;return h.default.createElement("div",{className:"ratingselect"},h.default.createElement("ul",{className:"ratingselect-type"},a.map(function(t,l){var n=l===a.length-1?"negative":"positive";return h.default.createElement("li",{className:(0,v.default)("ratingselect-type-block",n,{active:s===l-1}),key:l,onClick:e.selectRatingsClassify.bind(e,l-1)},t,h.default.createElement("span",{className:"count"},e.showRatingsCount(l-1)))})),h.default.createElement("div",{className:(0,v.default)("ratingselect-toggle",{on:!o}),onClick:this.toggleContent},h.default.createElement("i",{className:"icon-check_circle"}),h.default.createElement("span",{className:"ratingselect-toggle-text"},"只看有内容的评价")),1===n?h.default.createElement(N.default,{ratings:l,showAllRatingsText:o,showRatingsType:s}):h.default.createElement(y.default,{ratings:l,showAllRatingsText:o,showRatingsType:s}))}}]),t}(h.default.Component);t.default=w,w.propTypes={ratings:h.default.PropTypes.array},w.defaultProps={classify:["全部","推荐","吐槽"]}},130:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=a(132),s=l(r),o=a(78),u=l(o),c=a(77),i=l(c),d=a(7),f=l(d),m=a(8),p=l(m),h=a(9),E=l(h),v=a(11),g=l(v),N=a(10),_=l(N),y=a(1),w=l(y),S=a(57),C=l(S),k=a(76),L=l(k),T=a(231),b=l(T),M=a(227),P=l(M),x=a(226),I=l(x),O=a(248),R=l(O),D=a(20),F=l(D);a(303);var A=(0,C.default)(n=function(e){function t(e){var a=this;(0,p.default)(this,t);var l=(0,g.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return l.componentWillMount=(0,i.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l.props.goods.length>0)){e.next=7;break}return e.next=3,l.setState({goods:l.props.goods,loading:!1});case 3:l.initScroll(),l.calculateHeight(),e.next=13;break;case 7:return e.next=9,l.props.actions.fetchGoodsList();case 9:return e.next=11,l.setState({goods:l.props.goods,loading:!1});case 11:l.initScroll(),l.calculateHeight();case 13:case"end":return e.stop()}},e,a)})),l.initScroll=function(){l.goodsMenu=new R.default(l.refs.goodsMenu,{click:!0}),l.goodsDetail=new R.default(l.refs.goodsDetail,{click:!0,probeType:3}),l.goodsDetail.on("scroll",function(e){if(e.y){l.goodsDetail.trigger("scrollCancel"),l.scrollY=Math.abs(Math.round(e.y));var t=l.calculateCurrentIndex();l.state.menuIndex!==t&&l.setState({menuIndex:t})}})},l.calculateHeight=function(){var e=0;[].concat((0,s.default)(l.refs.goodsDetail.querySelectorAll(".goods-detail-good"))).map(function(t){e+=t.clientHeight,l.goodHeightList.push(e)})},l.calculateCurrentIndex=function(){for(var e=0;e<l.goodHeightList.length;e++){var t=l.goodHeightList[e],a=l.goodHeightList[e+1];if(!a||l.scrollY>=t&&l.scrollY<a)return e}return 0},l.selectMenu=function(e){if(e!==l.state.menuIndex){var t=l.refs.goodsDetail.querySelectorAll(".goods-detail-good");l.goodsDetail.scrollToElement(t[e],300)}},l.toggleFoodDetail=function(e,t){l.setState({showFoodDetail:t,selectFood:e})},l.state={goods:[],menuIndex:0,showFoodDetail:!1,selectFood:{},loading:!0},l.goodHeightList=[0],l}return(0,_.default)(t,e),(0,E.default)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.goods,l=t.menuIndex,n=(t.componentUpdate,t.showDetail,t.selectFood),r=t.showFoodDetail,s=this.props,o=s.seller,u=s.actions;return w.default.createElement("div",{className:"goods"},w.default.createElement("aside",{className:"goods-menu",ref:"goodsMenu"},w.default.createElement("ul",null,a.map(function(t,a){return w.default.createElement("li",{className:(0,F.default)("goods-menu-item",{current:l===a}),key:a,onClick:e.selectMenu.bind(e,a)},w.default.createElement("span",{className:"name"},t.type>0?w.default.createElement(L.default,{type:t.type,cls:1}):null,t.name))}))),w.default.createElement("section",{className:"goods-detail",ref:"goodsDetail"},w.default.createElement("ul",null,a.map(function(t,l){return w.default.createElement("li",{className:"goods-detail-good",key:l},w.default.createElement("h1",{className:"title"},t.name),w.default.createElement("ul",null,t.foods.map(function(t,l){return w.default.createElement(P.default,{key:l,actions:u,food:t,goods:a,toggleFoodDetail:e.toggleFoodDetail})})))})),w.default.createElement(b.default,{seller:o,goods:a,actions:u,menuIndex:l,onChangeCount:this.onChangeCount})),r?w.default.createElement(I.default,{actions:u,goods:a,food:n,toggleFoodDetail:this.toggleFoodDetail}):null)}}]),t}(w.default.Component))||n;t.default=A},131:function(e,t,a){"use strict";function l(e,t){var a=new Date(e);/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(a.getFullYear()+"").substr(4-RegExp.$1.length)));var l={"M+":a.getMonth()+1,"d+":a.getDate(),"h+":a.getHours(),"m+":a.getMinutes(),"s+":a.getSeconds()};for(var n in l)if(new RegExp("("+n+")").test(t)){var r=(l[n]+"").length>1?l[n]+"":"0"+l[n];t=t.replace(RegExp.$1,r)}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDate=l},149:function(e,t){},201:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(7),r=l(n),s=a(8),o=l(s),u=a(9),c=l(u),i=a(11),d=l(i),f=a(10),m=l(f),p=a(1),h=l(p),E=a(190),v=a(234),g=l(v),N=a(232),_=l(N),y=a(130),w=l(y),S=a(233),C=l(S),k=function(e){function t(){return(0,o.default)(this,t),(0,d.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return h.default.createElement(E.Router,{history:E.browserHistory},h.default.createElement(E.Route,{path:"/",component:g.default},h.default.createElement(E.IndexRoute,{component:w.default}),h.default.createElement(E.Route,{path:"goods",component:w.default}),h.default.createElement(E.Route,{path:"ratings",component:_.default}),h.default.createElement(E.Route,{path:"seller",component:C.default})))}}]),t}(h.default.Component);t.default=k},202:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(73),r=a(439),s=l(r),o=a(438),u=l(o),c=a(225),i=l(c),d=(0,u.default)(),f=(0,n.createStore)(i.default,(0,n.applyMiddleware)(s.default,d));t.default=f},222:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}var n=a(1),r=l(n),s=a(203),o=l(s),u=a(123),c=a(202),i=l(c),d=a(201),f=l(d);o.default.render(r.default.createElement(u.Provider,{store:i.default},r.default.createElement(f.default,null)),document.getElementById("app"))},223:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(e){return{type:v.RECEIVE_SELLER_LIST,data:e}}function r(){var e=this;return function(){var t=(0,h.default)(m.default.mark(function t(a,l){var r,s;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r="/api/seller",e.prev=1,e.next=4,(0,N.default)(r);case 4:return e.next=6,e.sent.data;case 6:if(s=e.sent,0!==s.errno){e.next=9;break}return e.abrupt("return",a(n(s.data)));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.warn(e.t0);case 14:case"end":return e.stop()}},t,e,[[1,11]])}));return function(e,a){return t.apply(this,arguments)}}()}function s(e){return{type:v.RECEIVE_GOODS_LIST,data:e}}function o(){var e=this;return function(){var t=(0,h.default)(m.default.mark(function t(a,l){var n,r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/goods",e.prev=1,e.next=4,(0,N.default)(n);case 4:return e.next=6,e.sent.data;case 6:if(r=e.sent,0!==r.errno){e.next=9;break}return e.abrupt("return",a(s(r.data)));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.warn(e.t0);case 14:case"end":return e.stop()}},t,e,[[1,11]])}));return function(e,a){return t.apply(this,arguments)}}()}function u(e,t,a){return function(l,n){l({type:v.SET_FOOD_COUNT,goods:e,id:t,num:a})}}function c(e){return function(t,a){t({type:v.RESET_SHOPPING_LIST,data:e})}}function i(e){return{type:v.RECEIVE_RATINGS_LIST,data:e}}function d(){var e=this;return function(){var t=(0,h.default)(m.default.mark(function t(a,l){var n,r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/ratings",e.prev=1,e.next=4,(0,N.default)(n);case 4:return e.next=6,e.sent.data;case 6:if(r=e.sent,0!==r.errno){e.next=9;break}return e.abrupt("return",a(i(r.data)));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.warn(e.t0);case 14:case"end":return e.stop()}},t,e,[[1,11]])}));return function(e,a){return t.apply(this,arguments)}}()}Object.defineProperty(t,"__esModule",{value:!0});var f=a(78),m=l(f),p=a(77),h=l(p);t.fetchSellerList=r,t.fetchGoodsList=o,t.setFoodCount=u,t.resetShoppingList=c,t.fetchRatingsList=d;var E=a(224),v=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(E),g=a(204),N=l(g)},224:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.RECEIVE_SELLER_LIST="RECEIVE_SELLER_LIST",t.RECEIVE_GOODS_LIST="RECEIVE_GOODS_LIST",t.RECEIVE_RATINGS_LIST="RECEIVE_RATINGS_LIST",t.RESET_SHOPPING_LIST="RESET_SHOPPING_LIST",t.SET_FOOD_COUNT="SET_FOOD_COUNT"},225:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(237),r=l(n),s=a(132),o=l(s),u=a(246),c=l(u),i=a(73),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case"RECEIVE_SELLER_LIST":return(0,c.default)({},e,t.data);default:return e}},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"RECEIVE_GOODS_LIST":return[].concat((0,o.default)(t.data));case"RESET_SHOPPING_LIST":return t.data.map(function(e){e.foods.map(function(e){e.count>0&&(e.count=0)})}),(0,c.default)({},e,t.data);case"SET_FOOD_COUNT":var a=!1,l=!0,n=!1,s=void 0;try{for(var u,i=(0,r.default)(t.goods);!(l=(u=i.next()).done);l=!0){if(u.value.foods.find(function(e){e.id===t.id&&(e.count+=t.num,a=!0)}),a)break}}catch(e){n=!0,s=e}finally{try{!l&&i.return&&i.return()}finally{if(n)throw s}}return(0,c.default)({},e,t.goods);default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];switch(t.type){case"RECEIVE_RATINGS_LIST":return[].concat((0,o.default)(e),(0,o.default)(t.data));default:return e}},p=(0,i.combineReducers)({seller:d,goods:f,ratings:m});t.default=p},226:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(7),r=l(n),s=a(8),o=l(s),u=a(9),c=l(u),i=a(11),d=l(i),f=a(10),m=l(f),p=a(1),h=l(p),E=a(75),v=l(E),g=a(129),N=l(g);a(149);var _=function(e){function t(){var e,a,l,n;(0,o.default)(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return a=l=(0,d.default)(this,(e=t.__proto__||(0,r.default)(t)).call.apply(e,[this].concat(u))),l.onChangeCount=function(){var e=l.props,t=e.actions,a=e.goods,n=e.food;t.setFoodCount(a,n.id,1)},n=a,(0,d.default)(l,n)}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.actions,a=e.goods,l=e.food;return h.default.createElement("section",{className:"food-detail"},h.default.createElement("header",{className:"food-detail-header"},h.default.createElement("img",{src:l.image,alt:l.name,className:"food-detail-header-image"}),h.default.createElement("span",{className:"back",onClick:this.props.toggleFoodDetail.bind(this,{},!1)},h.default.createElement("i",{className:"icon-arrow_lift"}))),h.default.createElement("div",{className:"food-detail-content"},h.default.createElement("h2",{className:"food-detail-content-title"},l.name),h.default.createElement("p",{className:"food-detail-content-detail"},"月售"+l.sellCount+"份 好评率"+l.rating+"%"),h.default.createElement("div",{className:"food-detail-content-price"},h.default.createElement("span",{className:"now"},"￥",l.price),l.oldPrice?h.default.createElement("span",{className:"old"},"￥",l.oldPrice):null),l.count>0?h.default.createElement("div",{className:"food-cart-control"},h.default.createElement(v.default,{food:l,goods:a,actions:t})):h.default.createElement("p",{className:"buy-cart",onClick:this.onChangeCount},"加入购物车")),h.default.createElement("div",{className:"split-line"}),h.default.createElement("div",{className:"food-detail-info"},h.default.createElement("h3",{className:"detail-title"},"商品信息"),h.default.createElement("p",{className:"info-content"},l.info)),h.default.createElement("div",{className:"split-line"}),h.default.createElement("div",{className:"food-detail-ratings"},h.default.createElement("h3",{className:"detail-title"},"商品评价"),h.default.createElement(N.default,{ratings:l.ratings,type:2})))}}]),t}(h.default.Component);t.default=_},227:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(7),r=l(n),s=a(8),o=l(s),u=a(9),c=l(u),i=a(11),d=l(i),f=a(10),m=l(f),p=a(1),h=l(p),E=a(75),v=l(E);a(149);var g=function(e){function t(){return(0,o.default)(this,t),(0,d.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.actions,a=e.goods,l=e.food;return h.default.createElement("li",{className:"food",onClick:this.props.toggleFoodDetail.bind(this,l,!0)},h.default.createElement("div",{className:"food-thumail"},h.default.createElement("img",{src:l.icon,alt:l.name})),h.default.createElement("div",{className:"food-content"},h.default.createElement("h2",{className:"food-content-name"},l.name),h.default.createElement("p",{className:"food-content-desc"},l.description),h.default.createElement("div",{className:"food-content-extra"},h.default.createElement("span",{className:"food-content-extra-count"},"月售",l.sellCount),h.default.createElement("span",null,"好评率",l.rating,"%")),h.default.createElement("div",{className:"food-content-price"},h.default.createElement("span",{className:"now"},"￥",l.price),l.oldPrice?h.default.createElement("span",{className:"old"},"￥",l.oldPrice):null)),h.default.createElement("div",{className:"food-cart-control"},h.default.createElement(v.default,{food:l,goods:a,actions:t})))}}]),t}(h.default.Component);t.default=g},228:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(7),r=l(n),s=a(8),o=l(s),u=a(9),c=l(u),i=a(11),d=l(i),f=a(10),m=l(f),p=a(1),h=l(p),E=a(20),v=l(E),g=a(58),N=l(g),_=a(76),y=l(_);a(298);var w=function(e){function t(e){(0,o.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.state={showDetail:!1},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"showDetail",value:function(e){this.setState({showDetail:e})}},{key:"render",value:function(){var e=this.props.seller,t=this.state.showDetail;return h.default.createElement("section",{className:"header"},h.default.createElement("div",{className:"header-goods"},h.default.createElement("div",{className:"header-goods-thumail"},h.default.createElement("img",{src:e.avatar,alt:e.name})),h.default.createElement("div",{className:"header-goods-content"},h.default.createElement("div",{className:"title"},h.default.createElement("i",{className:"title-icon"}),h.default.createElement("span",null,e.name)),h.default.createElement("div",{className:"des"},e.description,"/",e.deliveryTime,"分钟送达"),h.default.createElement("div",{className:"supports"},h.default.createElement(y.default,{cls:1,type:e.supports&&e.supports[0].type}),h.default.createElement("span",{className:"support-des"},e.supports&&e.supports[0].description))),h.default.createElement("div",{className:"header-goods-count",onClick:this.showDetail.bind(this,!0)},h.default.createElement("span",{className:"support-num"},e.supports&&e.supports.length,"个"),h.default.createElement("i",{className:"icon-keyboard_arrow_right"}))),h.default.createElement("div",{className:"header-notice",onClick:this.showDetail.bind(this,!0)},h.default.createElement("i",{className:"notice-icon"}),h.default.createElement("span",null,e.bulletin),h.default.createElement("i",{className:"icon-keyboard_arrow_right"})),h.default.createElement("div",{className:"header-bg"},h.default.createElement("img",{src:e.avatar})),h.default.createElement("div",{className:(0,v.default)("header-detail",{show:t})},h.default.createElement("div",{className:"header-wrapper"},h.default.createElement("h1",{className:"header-wrapper-name"},e.name),h.default.createElement(N.default,{score:e.score,starType:48}),h.default.createElement("div",{className:"header-wrapper-star"}),h.default.createElement("div",{className:"header-wrapper-title"},h.default.createElement("span",{className:"line"}),h.default.createElement("span",{className:"text"},"优惠信息"),h.default.createElement("span",{className:"line"})),h.default.createElement("ul",{className:"header-wrapper-supports"},e.supports&&e.supports.map(function(e){return h.default.createElement("li",{className:"support-item",key:e.type},h.default.createElement(y.default,{cls:2,type:e.type}),h.default.createElement("span",{className:"text"},e.description))})),h.default.createElement("div",{className:"header-wrapper-title"},h.default.createElement("span",{className:"line"}),h.default.createElement("span",{className:"text"},"商家公告"),h.default.createElement("span",{className:"line"})),h.default.createElement("div",{className:"header-wrapper-bulletin"},h.default.createElement("p",{className:"content"},e.bulletin))),h.default.createElement("div",{className:"header-detail-close",onClick:this.showDetail.bind(this,!1)},h.default.createElement("i",{className:"icon-close"}))))}}]),t}(h.default.Component);t.default=w},229:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(7),r=l(n),s=a(8),o=l(s),u=a(9),c=l(u),i=a(11),d=l(i),f=a(10),m=l(f),p=a(1),h=l(p),E=a(131),v=function(e){function t(e){(0,o.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.ALL=-1,a.POSITIVE=0,a.NEGATIVE=1,a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ratings,l=t.showAllRatingsText,n=t.showRatingsType,r=!0;return h.default.createElement("ul",{className:"ratingselect-content"},a.filter(function(t){return(r=!!l||Boolean(t.text))&&(n===e.ALL||t.rateType===n)}).map(function(t,a){return h.default.createElement("li",{className:"food-rating-item",key:a},h.default.createElement("p",{className:"food-rating-item-header"},h.default.createElement("span",{className:"ratetime"},(0,E.formatDate)(t.rateTime,"yyyy-MM-dd hh:mm")),h.default.createElement("span",{className:"username"},t.username,h.default.createElement("img",{src:t.avatar}))),h.default.createElement("p",{className:"food-rating-item-text"},h.default.createElement("i",{className:t.rateType===e.POSITIVE?"icon-thumb_up":"icon-thumb_down"}),t.text))}))}}]),t}(h.default.Component);t.default=v},230:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(7),r=l(n),s=a(8),o=l(s),u=a(9),c=l(u),i=a(11),d=l(i),f=a(10),m=l(f),p=a(1),h=l(p),E=a(58),v=l(E),g=a(131),N=function(e){function t(e){(0,o.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.ALL=-1,a.POSITIVE=0,a.NEGATIVE=1,a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.ratings,l=t.showAllRatingsText,n=t.showRatingsType,r=!0;return h.default.createElement("ul",{className:"ratingselect-content"},a.filter(function(t){return(r=!!l||Boolean(t.text))&&(n===e.ALL||t.rateType===n)}).map(function(t,a){return h.default.createElement("li",{className:"rating-item",key:a},h.default.createElement("div",{className:"rating-item-avatar"},h.default.createElement("img",{src:t.avatar})),h.default.createElement("div",{className:"rating-item-content"},h.default.createElement("p",{className:"rating-item-content-header"},h.default.createElement("span",{className:"username"},t.username),h.default.createElement("span",{className:"ratetime"},(0,g.formatDate)(t.rateTime,"yyyy-MM-dd hh:mm"))),h.default.createElement("div",{className:"rating-item-content-score"},h.default.createElement(v.default,{score:t.score,starType:24}),h.default.createElement("span",{className:"delivery"},t.deliveryTime)),h.default.createElement("p",{className:"rating-item-content-text"},t.text),h.default.createElement("p",{className:"rating-item-content-recommend"},h.default.createElement("i",{className:t.rateType===e.POSITIVE?"icon-thumb_up":"icon-thumb_down"}),t.recommend.map(function(e,t){return h.default.createElement("span",{key:t,className:"item-recommend"},e)}))))}))}}]),t}(h.default.Component);t.default=N},231:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(7),r=l(n),s=a(8),o=l(s),u=a(9),c=l(u),i=a(11),d=l(i),f=a(10),m=l(f),p=a(1),h=l(p),E=a(75),v=l(E),g=a(20),N=l(g);a(300);var _=function(e){function t(e){(0,o.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.calcPriceAndCount=function(e){var t=0,l=0;e.map(function(e){l+=e.count,t+=e.price*e.count}),a.totalCount=l,a.totalPrice=t},a.renderMinPrice=function(){var e=a.props.seller,t=e.data&&e.data.minPrice||20;switch(!0){case 0===a.totalPrice:return"￥"+t+"元起送";case a.totalPrice<t:return"还差￥"+(t-a.totalPrice)+"元起送";default:return"去结算"}},a.showPrice=function(e){e.stopPropagation();var t=a.props.seller,l=t.data&&t.data.minPrice||20,n=a.totalPrice+(t&&t.deliveryPrice);a.totalPrice<l||window.alert("支付"+n)},a.renderShoppingList=function(e){var t=a.props,l=t.goods,n=t.actions;return e.map(function(e,t){return h.default.createElement("li",{className:"shopping-food",key:t},h.default.createElement("span",{className:"shopping-food-name"},e.name),h.default.createElement("div",{className:"shopping-food-price"},h.default.createElement("span",null,"￥",e.price)),h.default.createElement("div",{className:"shopping-food-cart-control"},h.default.createElement(v.default,{food:e,goods:l,actions:n})))})},a.showShoppingList=function(){0!==a.foodList.length&&a.setState({showShoppingList:!a.state.showShoppingList})},a.hideShoppingList=function(){a.setState({showShoppingList:!1})},a.emptyShoppingList=function(){var e=a.props,t=e.goods;e.actions.resetShoppingList(t)},a.state={showShoppingList:!1},a.totalPrice=0,a.totalCount=0,a.foodList=[],a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentWillReceiveProps",value:function(e){if(this.props.menuIndex===e.menuIndex){var t=[];e.goods.map(function(e){e.foods.map(function(e){e.count>0&&t.push(e)})}),this.foodList=t,0===this.foodList.length&&this.hideShoppingList(),this.calcPriceAndCount(t)}}},{key:"shouldComponentUpdate",value:function(e){return this.props.menuIndex===e.menuIndex}},{key:"render",value:function(){var e=this.props,t=e.seller,a=(e.goods,this.state.showShoppingList),l=t.minPrice||20,n=this.totalPrice<l?"not-enough":"enough";return h.default.createElement("div",{className:"shopping-cart"},h.default.createElement("div",{className:"shopping-cart-wrp",onClick:this.showShoppingList},h.default.createElement("div",{className:"shopping-cart-content"},h.default.createElement("div",{className:"shopping-cart-content-left"},h.default.createElement("div",{className:"logo"},h.default.createElement("div",{className:(0,N.default)("logo-cart",{highlight:this.totalCount>0})},h.default.createElement("i",{className:"icon-shopping_cart"})),this.totalCount>0?h.default.createElement("div",{className:"logo-num"},this.totalCount):null),h.default.createElement("div",{className:(0,N.default)("total-price",{highlight:this.totalCount>0})},"￥",this.totalPrice),h.default.createElement("div",{className:"desc"},"另需配送费￥",t.deliveryPrice,"元")),h.default.createElement("div",{className:"shopping-cart-content-right",onClick:this.showPrice},h.default.createElement("div",{className:(0,N.default)("pay",n)},this.renderMinPrice())))),h.default.createElement("div",{className:(0,N.default)("shopping-cart-list",{show:a})},h.default.createElement("header",{className:"shopping-cart-list-header"},h.default.createElement("h1",{className:"title"},"购物车"),h.default.createElement("span",{className:"empty",onClick:this.emptyShoppingList},"清空")),h.default.createElement("ul",{className:"shopping-cart-list-content"},this.renderShoppingList(this.foodList))),h.default.createElement("div",{className:(0,N.default)("shopping-cart-mask",{show:a}),onClick:this.hideShoppingList}))}}]),t}(h.default.Component);t.default=_},232:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=a(7),s=l(r),o=a(8),u=l(o),c=a(9),i=l(c),d=a(11),f=l(d),m=a(10),p=l(m),h=a(1),E=l(h),v=a(57),g=l(v),N=a(58),_=l(N),y=a(129),w=l(y);a(304);var S=(0,g.default)(n=function(e){function t(){return(0,u.default)(this,t),(0,f.default)(this,(t.__proto__||(0,s.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){0===this.props.ratings.length&&this.props.actions.fetchRatingsList()}},{key:"render",value:function(){var e=this.props,t=e.seller,a=e.ratings;return E.default.createElement("section",{className:"ratings"},E.default.createElement("div",{className:"ratings-overview"},E.default.createElement("div",{className:"ratings-overview-left"},E.default.createElement("h2",{className:"score"},t.score),E.default.createElement("p",{className:"title"},"综合评分"),E.default.createElement("p",{className:"rank"},"高于周边商家",t.rankRate,"%")),E.default.createElement("div",{className:"ratings-overview-right"},E.default.createElement("div",{className:"score-wrapper"},E.default.createElement("span",{className:"title"},"服务态度"),E.default.createElement(_.default,{score:t.serviceScore,starType:36}),E.default.createElement("span",{className:"score"},t.serviceScore)),E.default.createElement("div",{className:"score-wrapper"},E.default.createElement("span",{className:"title"},"商品评分"),E.default.createElement(_.default,{score:t.foodScore,starType:36}),E.default.createElement("span",{className:"score"},t.foodScore)),E.default.createElement("p",{className:"delivery-wrapper"},E.default.createElement("span",{className:"title"},"送达时间"),E.default.createElement("span",{className:"delivery"},t.deliveryTime,"分钟")))),E.default.createElement("div",{className:"split-line"}),E.default.createElement("div",{className:"ratings-list"},E.default.createElement(w.default,{ratings:a,classify:["全部","推荐","吐槽"],type:1})))}}]),t}(E.default.Component))||n;t.default=S},233:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=a(7),s=l(r),o=a(8),u=l(o),c=a(9),i=l(c),d=a(11),f=l(d),m=a(10),p=l(m),h=a(1),E=l(h),v=a(20),g=l(v),N=a(57),_=l(N),y=a(58),w=l(y),S=a(76),C=l(S),k=a(235);a(305);var L=(0,_.default)(n=function(e){function t(e){(0,u.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.toggleFavorite=function(){a.setState({favorite:!a.state.favorite},function(){(0,k.saveStorage)("favorite",a.state.favorite)})},a.state={favorite:!!(0,k.getStorage)("favorite")},a}return(0,p.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){this.props.seller||this.props.actions.fetchSellerList()}},{key:"render",value:function(){var e=this.props.seller,t=this.state.favorite;return E.default.createElement("div",{className:"seller"},E.default.createElement("header",{className:"seller-header"},E.default.createElement("div",{className:"seller-header-content"},E.default.createElement("h1",{className:"content-title"},e.name),E.default.createElement(w.default,{starType:36,score:e.score}),E.default.createElement("span",{className:"content-text"},"(",e.ratingCount,")"),E.default.createElement("span",{className:"content-text"},"月售",e.sellCount,"单")),E.default.createElement("div",{className:"seller-header-favorite",onClick:this.toggleFavorite},E.default.createElement("i",{className:(0,g.default)("icon-favorite",{active:t})}),E.default.createElement("span",{className:"text"},t?"已收藏":"收藏"))),E.default.createElement("ul",{className:"seller-remark"},E.default.createElement("li",{className:"seller-remark-block"},E.default.createElement("h2",null,"起送价"),E.default.createElement("div",{className:"content"},E.default.createElement("span",{className:"content-stress"},e.minPrice),"元")),E.default.createElement("li",{className:"seller-remark-block"},E.default.createElement("h2",null,"商家配送"),E.default.createElement("div",{className:"content"},E.default.createElement("span",{className:"content-stress"},e.deliveryPrice),"元")),E.default.createElement("li",{className:"seller-remark-block"},E.default.createElement("h2",null,"平均配送时间"),E.default.createElement("div",{className:"content"},E.default.createElement("span",{className:"content-stress"},e.deliveryTime),"分钟"))),E.default.createElement("div",{className:"split-line"}),E.default.createElement("div",{className:"seller-bulletin"},E.default.createElement("h1",{className:"title"},"公告与活动"),E.default.createElement("div",{className:"seller-bulletin-content"},e.bulletin),E.default.createElement("ul",{className:"seller-bulletin-supports"},e.supports&&e.supports.map(function(e,t){return E.default.createElement("li",{className:"support-item",key:t},E.default.createElement(C.default,{cls:4,type:e.type}),E.default.createElement("span",{className:"text"},e.description))}))),E.default.createElement("div",{className:"split-line"}),E.default.createElement("div",{className:"seller-pics"},E.default.createElement("h1",{className:"title"},"商家实景"),E.default.createElement("ul",{className:"seller-pics-list"},e.pics&&e.pics.map(function(e,t){return E.default.createElement("li",{className:"pic-item",key:t},E.default.createElement("img",{src:e}))}))),E.default.createElement("div",{className:"split-line"}),E.default.createElement("div",{className:"seller-info"},E.default.createElement("h1",{className:"title"},"商家信息"),E.default.createElement("ul",{className:"seller-info-list"},e.infos&&e.infos.map(function(e,t){return E.default.createElement("li",{className:"info-item",key:t},e)}))))}}]),t}(E.default.Component))||n;t.default=L},234:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,r=a(78),s=l(r),o=a(77),u=l(o),c=a(7),i=l(c),d=a(8),f=l(d),m=a(9),p=l(m),h=a(11),E=l(h),v=a(10),g=l(v),N=a(1),_=l(N),y=a(190),w=a(57),S=l(w),C=a(228),k=l(C),L=a(130),T=(l(L),a(20)),b=l(T);a(306);var M=(0,S.default)(n=function(e){function t(e){var a=this;(0,f.default)(this,t);var l=(0,E.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return l.componentWillMount=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.props.actions.fetchSellerList();case 2:l.setState({seller:l.props.seller,loading:!1});case 3:case"end":return e.stop()}},e,a)})),l.state={seller:{},loading:!0},l}return(0,g.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){document.querySelector("#sell-wrp-hook").style.height=window.innerHeight+"px"}},{key:"render",value:function(){var e=this.state,t=e.seller,a=(e.loading,this.props),l=(a.actions,a.goods,a.location);return void 0===t?null:_.default.createElement("div",{className:"sell-wrapper",id:"sell-wrp-hook"},_.default.createElement(k.default,{seller:t}),_.default.createElement("ul",{className:"nav"},_.default.createElement("li",{className:"nav-item"},_.default.createElement(y.Link,{to:"/goods",className:(0,b.default)({active:"/"===l.pathname||"/goods"===l.pathname})},"商品")),_.default.createElement("li",{className:"nav-item"},_.default.createElement(y.Link,{to:"/ratings",className:(0,b.default)({active:"/ratings"===l.pathname})},"评价")),_.default.createElement("li",{className:"nav-item"},_.default.createElement(y.Link,{to:"/seller",className:(0,b.default)({active:"/seller"===l.pathname})},"商家"))),this.props.children)}}]),t}(_.default.Component))||n;t.default=M},235:function(e,t,a){"use strict";function l(e,t){(0,s.default)(window.localStorage.setItem(e,t))}function n(e){return JSON.parse(window.localStorage.getItem(e))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(238),s=function(e){return e&&e.__esModule?e:{default:e}}(r);t.saveStorage=l,t.getStorage=n},297:function(e,t){},298:function(e,t){},299:function(e,t){},300:function(e,t){},301:function(e,t){},302:function(e,t){},303:function(e,t){},304:function(e,t){},305:function(e,t){},306:function(e,t){},57:function(e,t,a){"use strict";function l(e){return e}function n(e){return{actions:(0,s.bindActionCreators)(u,e)}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(123),s=a(73),o=a(223),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(o);t.default=function(e){return(0,r.connect)(l,n)(e)}},58:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(7),r=l(n),s=a(8),o=l(s),u=a(9),c=l(u),i=a(11),d=l(i),f=a(10),m=l(f),p=a(1),h=l(p),E=a(20),v=l(E);a(301);var g=function(e){function t(e){(0,o.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.LENGTH=5,a.CLS_ON="on",a.CLS_HALF="half",a.CLS_OFF="off",a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){for(var e=this.props,t=e.starType,a=e.score,l=Math.floor(2*a)/2,n=l%1!=0,r=Math.floor(l),s=[],o=0;o<r;o++)s.push(this.CLS_ON);for(n&&s.push(this.CLS_HALF);s.length<this.LENGTH;)s.push(this.CLS_OFF);return h.default.createElement("div",{className:(0,v.default)("star","star-"+t)},s.map(function(e,t){return h.default.createElement("span",{className:(0,v.default)("star-item",e),key:t})}))}}]),t}(h.default.Component);t.default=g},75:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(7),r=l(n),s=a(8),o=l(s),u=a(9),c=l(u),i=a(11),d=l(i),f=a(10),m=l(f),p=a(1),h=l(p),E=a(20),v=l(E);a(297);var g=function(e){function t(e){(0,o.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.onChangeCount=function(e,t){t.stopPropagation();var l=a.props,n=l.goods,r=l.food;l.actions.setFoodCount(n,r.id,e)},a.cacheCount=a.props.food.count||0,a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"shouldComponentUpdate",value:function(e){return this.cacheCount!==e.food.count}},{key:"componentWillUpdate",value:function(e){this.cacheCount=e.food.count}},{key:"render",value:function(){var e=this.props.food.count;return h.default.createElement("div",{className:"cart-control"},h.default.createElement("i",{className:(0,v.default)("cart-control-decrease icon-remove_circle_outline",{active:e>0}),onClick:this.onChangeCount.bind(this,-1)}),h.default.createElement("span",{className:(0,v.default)("cart-control-count",{"active-count":e>0})},e),h.default.createElement("i",{className:"cart-control-increase icon-add_circle",onClick:this.onChangeCount.bind(this,1)}))}}]),t}(h.default.Component);t.default=g},76:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(7),r=l(n),s=a(8),o=l(s),u=a(9),c=l(u),i=a(11),d=l(i),f=a(10),m=l(f),p=a(1),h=l(p),E=a(20),v=l(E);a(302);var g=function(e){function t(e){(0,o.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.classMap=["decrease","discount","special","invoice","guarantee"],a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props,t=e.cls,a=e.type;return h.default.createElement("i",{className:(0,v.default)("support-icon-"+t,this.classMap[a])})}}]),t}(h.default.Component);t.default=g}},[222]);